apply from: '../android-standard/androidStandardConfig.gradle'
import groovy.json.JsonSlurper
// Скрипт для включения модулей android-standard из локального репозитория в settings.gradle

if (gradle.ext.androidStandard.debugEnabled) {
    try {
        def androidStandardDebugDir = gradle.ext.androidStandard.debugDir
        def modules = new JsonSlurper().parse(new File("$androidStandardDebugDir/buildSrc/modules.json"), 'utf-8')
        assert modules instanceof List
        includeBuild("$androidStandardDebugDir") {
            dependencySubstitution {
                modules.each {
                    substitute module("ru.surfstudio.android:$it") with project(":$it")
                }
            }
        }
    } catch (FileNotFoundException ignored) {
        logger.error("file buildSrc/modules.json  in local android standard folder  not found")
    }

}